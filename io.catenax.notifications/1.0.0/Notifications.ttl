#######################################################################
# Copyright (c) 2023-2024 ISTOS GmbH (a member of the DMG Mori Group)
# Copyright (c) 2023-2024 Fraunhofer-Gesellschaft zur Foerderung der angewandten Forschung e.V. (represented by Fraunhofer ISST)
# Copyright (c) 2023-2024 TRUMPF Werkzeugmaschinen SE + Co. KG
# Copyright (c) 2023-2024 Volkswagen AG
# Copyright (c) 2023-2024 Contributors to the Eclipse Foundation
#
# See the NOTICE file(s) distributed with this work for additional
# information regarding copyright ownership.
#
# This work is made available under the terms of the
# Creative Commons Attribution 4.0 International (CC-BY-4.0) license,
# which is available at
# https://creativecommons.org/licenses/by/4.0/legalcode.
#
# SPDX-License-Identifier: CC-BY-4.0
#######################################################################
@prefix samm: <urn:samm:org.eclipse.esmf.samm:meta-model:2.1.0#> .
@prefix samm-c: <urn:samm:org.eclipse.esmf.samm:characteristic:2.1.0#> .
@prefix samm-e: <urn:samm:org.eclipse.esmf.samm:entity:2.1.0#> .
@prefix unit: <urn:samm:org.eclipse.esmf.samm:unit:2.1.0#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix : <urn:samm:io.catenax.notifications:1.0.0#> .
@prefix ext-number: <urn:samm:io.catenax.shared.business_partner_number:2.0.0#> .
@prefix ext-uuid: <urn:samm:io.catenax.shared.uuid:1.0.0#> .

:Notifications a samm:Aspect ;
   samm:preferredName "Notifications"@en ;
   samm:description "This aspect model defines the standard for notification exchange between business partners. Notifications refer to specific events which affect production or demand."@en ;
   samm:properties ( [ samm:property :affectedSitesSender; samm:optional true ] [ samm:property :affectedSitesRecipient; samm:optional true ] :leadingRootCause :effect [ samm:property :text; samm:optional true ] [ samm:property :materialNumberDigitalTwin; samm:optional true ] :startDateOfEffect [ samm:property :expectedEndDateOfEffect; samm:optional true ] :status :contentChangedAt [ samm:property :relatedSourceMessageId; samm:optional true ] [ samm:property :manufacturerPartId; samm:optional true ] [ samm:property :customerPartId; samm:optional true ] ) ;
   samm:operations ( ) ;
   samm:events ( ) .

:affectedSitesSender a samm:Property ;
   samm:preferredName "Affected sites of the sender."@en ;
   samm:description """The affected Business Partner SITE Numbers of the sending party.

The value must be a valid BPNS. Applicable constraints are defined in the corresponding standard.

It is RECOMMENDED to sent the sender BPNS. It MUST be possible to select multiple sender BPNS."""@en ;
   samm:exampleValue "BPNS7588787849VQ" ;
   samm:characteristic :AffectedSitesCharacteristic .

:affectedSitesRecipient a samm:Property ;
   samm:preferredName "Affected sites of the recipient"@en ;
   samm:description """The affected Business Partner SITE Numbers of the receiving party.

The value must be a valid BPNS. Applicable constraints are defined in the corresponding standard.

It is RECOMMENDED to send the receiver BPNS. It MUST be possible to select multiple receiver BPNS."""@en ;
   samm:characteristic :AffectedSitesCharacteristic ;
   samm:exampleValue "BPNS6666787765VQ" .

:leadingRootCause a samm:Property ;
   samm:preferredName "Leading root cause"@en ;
   samm:description "The main cause that has or may have an impact on the supply of goods."@en ;
   samm:characteristic :LeadingRootCauseEnumeration ;
   samm:exampleValue "strike" .

:effect a samm:Property ;
   samm:preferredName "Effect"@en ;
   samm:description """Effect or impact on the supply of goods as a consequence of the leadingRootCause.

From business perspective demand/capacity reduction are most relevant values in connection with above mentioned root causes. For technical completeness demand/capacity increase are also added to the value list."""@en ;
   samm:characteristic :EffectEnumeration ;
   samm:exampleValue "capacity-reduction" .

:text a samm:Property ;
   samm:preferredName "Text"@en ;
   samm:description "Free text description for notification (max. 4000 characters)."@en ;
   samm:characteristic :UserInputTrait ;
   samm:exampleValue "Capacity reduction due to ongoing strike." .

:materialNumberDigitalTwin a samm:Property ;
   samm:preferredName "Material number Digital Twin"@en ;
   samm:description "UUID (DT Network Identifier): Via DT (Digital Twin) UUID a receiver is able to identify the own affected material numbers, because the digital twin is common for the sender and the receiver. If a digital twin is available, it is RECOMMENDED only exchanging the DT material number."@en ;
   samm:characteristic :MaterialNumberDigitalTwinCharacteristic ;
   samm:exampleValue "f81d4fae-7dec-11d0-a765-00a0c91e6bf6" .

:startDateOfEffect a samm:Property ;
   samm:preferredName "Start date of the effect."@en ;
   samm:description """Expected start date of the impact MUST be shared by the sender of the message.

This also covers cases where sending of the message and start of the impact differ from each other.

The value MUST be formatted according to the ISO 8601 standard."""@en ;
   samm:characteristic samm-c:Timestamp ;
   samm:exampleValue "2023-12-13T15:00:00+01:00"^^xsd:dateTime .

:expectedEndDateOfEffect a samm:Property ;
   samm:preferredName "Expected end date of effect."@en ;
   samm:description """Expected end date of the impact MAY be mentioned by the sender of the message.

The value MUST be formatted according to the ISO 8601 standard."""@en ;
   samm:characteristic samm-c:Timestamp ;
   samm:exampleValue "2023-12-17T08:00:00+01:00"^^xsd:dateTime .

:status a samm:Property ;
   samm:preferredName "Status"@en ;
   samm:description "Status \"open\" should be used in the context of an effect which remains active. Status \"resolved\" should be used to inform the other business that the effect of the initial notification stopped or has been resolved."@en ;
   samm:characteristic :StatusEnumeration ;
   samm:exampleValue "open" .

:contentChangedAt a samm:Property ;
   samm:preferredName "Content changed at"@en ;
   samm:description "The timestamp of the latest change of this notification. Date and time are set according to a timezone."@en ;
   samm:characteristic samm-c:Timestamp ;
   samm:exampleValue "2023-12-13T15:00:00+01:00"^^xsd:dateTime .

:relatedSourceMessageId a samm:Property ;
   samm:preferredName "Related Source Message ID"@en ;
   samm:description """Unique ID identifying a source message somehow related to the current one.

Proposal: Unique ID identifying the source message that started the notification thread."""@en ;
   samm:characteristic ext-uuid:UuidV4Trait .

:manufacturerPartId a samm:Property ;
   samm:preferredName "Manufacturer Part ID"@en ;
   samm:description """Part identifier as assigned by the manufacturer. This property identifies the part in the manufacturer's database.

If the manufacturer is the data provider, sending manufacturer part ID is RECOMMENDED."""@en ;
   samm:characteristic :MaterialNumberCharacteristic .

:customerPartId a samm:Property ;
   samm:preferredName "Customer Part ID"@en ;
   samm:description """Part identifier as assigned by the customer. This property identifies the part in the customer's database. For standard parts (e.g. screws) for which a customer does not have an own ID, the manufacturerPartId supplier should be set in this field, too.

If the customer is the data provider, it is RECOMMENDED to send the customerPartId."""@en ;
   samm:characteristic :MaterialNumberCharacteristic .

:AffectedSitesCharacteristic a samm-c:Set ;
   samm:preferredName "Affected Sites Characteristic"@en ;
   samm:description "A list of BPNS that are affected."@en ;
   samm-c:elementCharacteristic ext-number:BpnsTrait .

:LeadingRootCauseEnumeration a samm-c:Enumeration ;
   samm:preferredName "Leading root cause enumeration."@en ;
   samm:description "Possible root causes."@en ;
   samm:dataType xsd:string ;
   samm-c:values ( "strike" "natural-disaster" "production-incident" "pandemic-or-epidemic" "logistics-disruption" "war" "other" ) .

:EffectEnumeration a samm-c:Enumeration ;
   samm:preferredName "Effect enumeration"@en ;
   samm:description "Enumeration of possible effects due to the mentioned leadingRootCause."@en ;
   samm:dataType xsd:string ;
   samm-c:values ( "demand-reduction" "demand-increase" "capacity-reduction" "capacity-increase" ) .

:UserInputTrait a samm-c:Trait ;
   samm:preferredName "User Input Trait"@en ;
   samm:description "Trait to ensure correct values for the user input."@en ;
   samm-c:baseCharacteristic :UserInputCharacteristic ;
   samm-c:constraint :TextLengthConstraint .

:MaterialNumberDigitalTwinCharacteristic a samm-c:Set ;
   samm:preferredName "Material Number Digital Twin Characteristic"@en ;
   samm:description "A set of Digital Twin material numbers."@en ;
   samm:dataType xsd:string ;
   samm-c:elementCharacteristic ext-uuid:Uuidv4Characteristic .

:StatusEnumeration a samm-c:Enumeration ;
   samm:preferredName "Status enumeration."@en ;
   samm:description "Status can be either \"open\" or \"resolved\"."@en ;
   samm:dataType xsd:string ;
   samm-c:values ( "resolved" "open" ) .

:MaterialNumberCharacteristic a samm-c:Set ;
   samm:preferredName "Material Number"@en ;
   samm:description "The material number is a multi-character string, usually assigned by an ERP system of the customer or the manufacturer."@en ;
   samm:dataType xsd:string .

:UserInputCharacteristic a samm:Characteristic ;
   samm:preferredName "User input characteristic"@en ;
   samm:description "User input can be any string that is max. 4000 characters."@en ;
   samm:dataType xsd:string .

:TextLengthConstraint a samm-c:LengthConstraint ;
   samm:preferredName "UserInputConstraint"@en ;
   samm:description "Constraint for a string to be max. 4000 characters long."@en ;
   samm-c:maxValue "4000"^^xsd:nonNegativeInteger .

